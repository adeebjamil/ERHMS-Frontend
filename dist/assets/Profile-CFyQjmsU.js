import{j as e,r as x,b as S,B as D}from"./index-CvOK6pca.js";import{g as $,n as I,o as B,p as L,B as A,y as J}from"./index-B8cdnCNl.js";import{C as U,c as H,a as M,b as O}from"./Card-C7CfUBJc.js";import{g as R}from"./helpers-CaOlnEck.js";import{P as z}from"./constants-C-b4r1xk.js";const j=({children:s,type:c="button",variant:o="primary",size:i="md",fullWidth:a=!1,disabled:l=!1,onClick:r})=>{const m="font-semibold rounded focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors",d={sm:"px-3 py-1 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"},n={primary:"bg-indigo-600 hover:bg-indigo-700 text-white focus:ring-indigo-500",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-800 focus:ring-gray-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",outline:"bg-transparent border border-indigo-600 text-indigo-600 hover:bg-indigo-50 focus:ring-indigo-500"},t=a?"w-full":"",u=l?"opacity-50 cursor-not-allowed":"cursor-pointer";return e.jsx("button",{type:c,onClick:r,disabled:l,className:`${m} ${d[i]} ${n[o]} ${t} ${u}`,children:s})},G=({profile:s,onUpdate:c})=>{var d,n,t,u,p,b,f,v,N,C,w,F,P;const[o,i]=x.useState(!1),[a,l]=x.useState({phone:s.phone||"",address:{street:((d=s.address)==null?void 0:d.street)||"",city:((n=s.address)==null?void 0:n.city)||"",state:((t=s.address)==null?void 0:t.state)||"",zipCode:((u=s.address)==null?void 0:u.zipCode)||"",country:((p=s.address)==null?void 0:p.country)||""}}),r=h=>{const{name:g,value:E}=h.target;if(g.startsWith("address.")){const y=g.split(".")[1];l(k=>({...k,address:{...k.address,[y]:E}}))}else l(y=>({...y,[g]:E}))},m=async()=>{await c(a)&&i(!1)};return e.jsxs(U,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden mr-4 border-2 border-gray-200",children:e.jsx("img",{src:s.profileImage?R(s.profileImage):z,alt:`${s.firstName} ${s.lastName}`,className:"w-full h-full object-cover",onError:h=>{h.target.onerror=null,h.target.src=z}})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:`px-2 py-1 text-xs font-semibold text-white rounded ${s.status==="active"?"bg-green-500":s.status==="on leave"?"bg-yellow-500":"bg-red-500"}`,children:s.status})]})]})}),e.jsxs(M,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-lg font-medium",children:"Personal Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx($,{className:"mt-1 mr-2 text-gray-500"}),e.jsx("span",{children:s.email})]}),o?e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block mb-1 text-sm font-medium text-gray-700",children:"Phone"}),e.jsx("input",{type:"text",id:"phone",name:"phone",value:a.phone,onChange:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}):s.phone?e.jsxs("div",{className:"flex items-start",children:[e.jsx(I,{className:"mt-1 mr-2 text-gray-500"}),e.jsx("span",{children:s.phone})]}):null]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-lg font-medium",children:"Job Details"}),e.jsxs("div",{className:"space-y-3",children:[s.department&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(B,{className:"mt-1 mr-2 text-gray-500"}),e.jsxs("span",{children:["Department: ",s.department]})]}),s.position&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(L,{className:"mt-1 mr-2 text-gray-500"}),e.jsxs("span",{children:["Position: ",s.position]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date of Joining:"})," ",new Date(s.dateOfJoining).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"mb-3 text-lg font-medium",children:"Address"}),o?e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"street",className:"block mb-1 text-sm font-medium text-gray-700",children:"Street"}),e.jsx("input",{type:"text",id:"street",name:"address.street",value:a.address.street,onChange:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block mb-1 text-sm font-medium text-gray-700",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"address.city",value:a.address.city,onChange:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block mb-1 text-sm font-medium text-gray-700",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"address.state",value:a.address.state,onChange:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"zipCode",className:"block mb-1 text-sm font-medium text-gray-700",children:"Zip Code"}),e.jsx("input",{type:"text",id:"zipCode",name:"address.zipCode",value:a.address.zipCode,onChange:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block mb-1 text-sm font-medium text-gray-700",children:"Country"}),e.jsx("input",{type:"text",id:"country",name:"address.country",value:a.address.country,onChange:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}):e.jsxs("div",{children:[((b=s.address)==null?void 0:b.street)&&e.jsx("p",{children:s.address.street}),(((f=s.address)==null?void 0:f.city)||((v=s.address)==null?void 0:v.state))&&e.jsxs("p",{children:[s.address.city,s.address.city&&s.address.state&&", ",s.address.state," ",s.address.zipCode]}),((N=s.address)==null?void 0:N.country)&&e.jsx("p",{children:s.address.country}),!((C=s.address)!=null&&C.street)&&!((w=s.address)!=null&&w.city)&&!((F=s.address)!=null&&F.state)&&!((P=s.address)!=null&&P.country)&&e.jsx("p",{className:"text-gray-500",children:"No address information available"})]})]})]}),e.jsx(O,{children:o?e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(j,{variant:"secondary",onClick:()=>i(!1),children:"Cancel"}),e.jsxs(j,{variant:"primary",onClick:m,children:[e.jsx(A,{className:"mr-1"})," Save Changes"]})]}):e.jsxs(j,{variant:"outline",onClick:()=>i(!0),children:[e.jsx(J,{className:"mr-1"})," Edit Profile"]})})]})},K=()=>{const[s,c]=x.useState(null),[o,i]=x.useState(!0),[a,l]=x.useState("");x.useEffect(()=>{(async()=>{var d,n;try{i(!0),console.log("Fetching employee profile...");const{data:t}=await S.get("/employees/profile");console.log("Profile data received:",t),c(t),i(!1)}catch(t){console.error("Error fetching profile:",t),l(((n=(d=t.response)==null?void 0:d.data)==null?void 0:n.message)||"Failed to fetch profile data"),D.error("Failed to load profile data"),i(!1)}})()},[]);const r=async m=>{var d,n;try{const{data:t}=await S.put("/employees/profile",m);return c(t),!0}catch(t){return l(((n=(d=t.response)==null?void 0:d.data)==null?void 0:n.message)||"Failed to update profile"),!1}};return o?e.jsx("div",{className:"flex justify-center p-8",children:"Loading profile..."}):e.jsxs("div",{children:[e.jsx("h2",{className:"mb-6 text-2xl font-semibold",children:"My Profile"}),a&&e.jsx("div",{className:"p-3 mb-4 text-white bg-red-500 rounded",children:a}),s?e.jsx(G,{profile:s,onUpdate:r}):e.jsx("div",{className:"p-4 text-center text-red-500",children:"Profile not found"})]})};export{K as default};
