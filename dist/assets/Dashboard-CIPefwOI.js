import{u as g,r as o,j as e,b as f,B as u,N as t,O as j}from"./index-CvOK6pca.js";import{C as m,P as p}from"./constants-C-b4r1xk.js";import{F as h,j as y,k as N,e as b,l as v,m as I,g as w}from"./index-B8cdnCNl.js";import{g as E}from"./helpers-CaOlnEck.js";const M=()=>{const{logout:a,currentUser:r}=g(),[n,d]=o.useState(null),[l,c]=o.useState(!0);o.useEffect(()=>{(async()=>{try{if(r&&r.role==="employee"){c(!0);const{data:s}=await f.get("/employees/profile");s.profileImage&&d(E(s.profileImage)),c(!1)}}catch(s){console.error("Error fetching profile image:",s),c(!1)}})()},[r]);const x=()=>{a(),u.info("You have been logged out successfully")};return e.jsxs("nav",{className:"flex items-center justify-between p-4 bg-white shadow",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 mr-3 overflow-hidden rounded-full",children:e.jsx("img",{src:n||m.logo,alt:n?"Profile Picture":"Company Logo",className:"object-cover w-full h-full",onError:i=>{i.target.onerror=null,i.target.src=p}})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"Employee Dashboard"}),e.jsx("p",{className:"text-xs text-gray-500",children:m.name})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"mr-4 text-sm font-medium text-gray-700",children:["Welcome, ",r==null?void 0:r.username]}),e.jsxs("button",{onClick:x,className:"flex items-center px-4 py-2 font-bold text-white transition bg-red-600 rounded hover:bg-red-700",children:[e.jsx(h,{className:"mr-2"})," Logout"]})]})]})},P=()=>{const[a,r]=o.useState(0),[n,d]=o.useState(null),{currentUser:l,logout:c}=g();o.useEffect(()=>{x(),i()},[]);const x=async()=>{try{const{data:s}=await f.get("/leave/updates-count");r(s.count)}catch(s){console.error("Failed to fetch notification counts",s),r(0)}},i=async()=>{try{const{data:s}=await f.get("/employees/profile");s.profileImage&&d(`${"https://ehrms-backend.onrender.com/api".replace("/api","")}${s.profileImage}`)}catch(s){console.error("Failed to fetch profile image",s)}};return e.jsxs("aside",{className:"flex flex-col w-64 bg-gray-800 text-white overflow-y-auto",children:[e.jsx("div",{className:"p-5 bg-gray-900",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("img",{src:"/Frame 3.png",alt:m.shortName,className:"w-16 h-16 object-contain mb-3",onError:s=>{s.target.onerror=null,s.target.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIiBmaWxsPSJub25lIj48cmVjdCB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9IiM0QjU1NjMiLz48L3N2Zz4="}}),e.jsx("h1",{className:"text-xl font-bold",children:m.name})]})}),e.jsxs("div",{className:"p-5 flex items-center border-b border-gray-700",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden mr-3 bg-gray-600",children:e.jsx("img",{src:n||p,alt:(l==null?void 0:l.name)||"User",className:"w-full h-full object-cover",onError:s=>{s.target.onerror=null,s.target.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNTAiIGhlaWdodD0iMTUwIiB2aWV3Qm94PSIwIDAgMTUwIDE1MCIgZmlsbD0ibm9uZSI+PHJlY3Qgd2lkdGg9IjE1MCIgaGVpZ2h0PSIxNTAiIGZpbGw9IiNEMUQxRDEiLz48L3N2Zz4="}})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:(l==null?void 0:l.name)||(l==null?void 0:l.username)||"User"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Employee"})]})]}),e.jsxs("nav",{className:"flex flex-col p-4 space-y-2",children:[e.jsxs(t,{to:"/employee/profile",className:({isActive:s})=>`flex items-center px-4 py-2 rounded transition-colors ${s?"bg-purple-900":"hover:bg-purple-900"}`,children:[e.jsx(y,{className:"mr-2"})," Profile"]}),e.jsxs(t,{to:"/employee/attendance",className:({isActive:s})=>`flex items-center px-4 py-2 rounded transition-colors ${s?"bg-red-900":"hover:bg-red-900"}`,children:[e.jsx(N,{className:"mr-2"})," Attendance"]}),e.jsxs(t,{to:"/employee/leave",className:({isActive:s})=>`flex items-center px-4 py-2 rounded relative transition-colors ${s?"bg-cyan-900":"hover:bg-cyan-900"}`,children:[e.jsx(b,{className:"mr-2"})," Leave",a>0&&e.jsx("span",{className:"absolute top-0 right-0 transform translate-x-1 -translate-y-1 bg-red-500 text-xs rounded-full h-5 w-5 flex items-center justify-center",children:a})]}),e.jsxs(t,{to:"/employee/documents",className:({isActive:s})=>`flex items-center px-4 py-2 rounded transition-colors ${s?"bg-fuchsia-900":"hover:bg-fuchsia-900"}`,children:[e.jsx(v,{className:"mr-2"})," Documents"]}),e.jsxs(t,{to:"/employee/arrivals",className:({isActive:s})=>`flex items-center px-4 py-2 rounded transition-colors ${s?"bg-green-700":"hover:bg-green-700"}`,children:[e.jsx(I,{className:"mr-2"})," Arrivals"]}),e.jsxs(t,{to:"/employee/messages",className:({isActive:s})=>`flex items-center px-4 py-2 rounded transition-colors ${s?"bg-emerald-900":"hover:bg-emerald-900"}`,children:[e.jsx(w,{className:"mr-2"})," Messages"]}),e.jsx("div",{className:"pt-4 mt-4 border-t border-gray-700",children:e.jsxs("button",{onClick:c,className:"flex items-center px-4 py-2 rounded text-gray-400 hover:bg-red-700 hover:text-white w-full transition-colors",children:[e.jsx(h,{className:"mr-2"})," Sign Out"]})})]})]})},A=({children:a})=>e.jsxs("div",{className:"flex h-screen bg-gray-100",children:[e.jsx(P,{}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx(M,{}),e.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:a})]})]}),F=()=>{const{currentUser:a}=g();return e.jsxs(A,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"mb-2 text-2xl font-semibold",children:["Welcome, ",a==null?void 0:a.username]}),e.jsx("p",{className:"text-gray-600",children:"Access your employee information"})]}),e.jsx(j,{})]})};export{F as default};
