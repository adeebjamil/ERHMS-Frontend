import{a as w,j as e,r as i,b as j,B as b}from"./index-CvOK6pca.js";import{g as N,n as y,o as E,p as C,q as F,r as L,s as k,t as S,b as $,u as _}from"./index-B8cdnCNl.js";import{P as v}from"./constants-C-b4r1xk.js";import{g as D}from"./helpers-CaOlnEck.js";import{C as A,a as I,b as P}from"./Card-C7CfUBJc.js";const T=({employee:s,onEdit:d,onDelete:m})=>{const n=w(),o=a=>{window.open(`mailto:${a}`,"_blank")},c=a=>{const h=a.replace(/\D/g,"");window.open(`https://wa.me/${h}`,"_blank")},l=a=>{n(`/admin/employee-details/${a}`)},x=a=>{a.target.onerror=null,a.target.src=v};return e.jsxs(A,{children:[e.jsxs(I,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-2 border-indigo-200",children:e.jsx("img",{src:s.profileImage?D(s.profileImage):v,alt:`${s.firstName} ${s.lastName}`,className:"w-full h-full object-cover",onError:x})})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:`px-2 py-1 text-xs font-semibold text-white rounded ${s.status==="active"?"bg-green-500":s.status==="on leave"?"bg-yellow-500":"bg-red-500"}`,children:s.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(N,{className:"mt-1 mr-2 text-gray-500"}),e.jsx("span",{children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(y,{className:"mt-1 mr-2 text-gray-500"}),e.jsx("span",{children:s.phone})]}),s.department&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(E,{className:"mt-1 mr-2 text-gray-500"}),e.jsx("span",{children:s.department})]}),s.position&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(C,{className:"mt-1 mr-2 text-gray-500"}),e.jsx("span",{children:s.position})]}),s.salary?e.jsxs("div",{className:"mt-2 font-semibold",children:["Salary: $",s.salary.toLocaleString()]}):null]})]}),e.jsx(P,{children:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>o(s.email),className:"p-2 text-blue-600 bg-blue-100 rounded-full hover:bg-blue-200",title:"Send Email",children:e.jsx(N,{})}),s.phone&&e.jsx("button",{onClick:()=>c(s.phone),className:"p-2 text-green-600 bg-green-100 rounded-full hover:bg-green-200",title:"Contact via WhatsApp",children:e.jsx(F,{})}),e.jsx("button",{onClick:()=>l(s._id),className:"p-2 text-purple-600 bg-purple-100 rounded-full hover:bg-purple-200",title:"View Details",children:e.jsx(L,{})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:d,className:"flex items-center px-3 py-1 text-blue-600 bg-blue-100 rounded hover:bg-blue-200",children:[e.jsx(k,{className:"mr-1"})," Edit"]}),e.jsxs("button",{onClick:m,className:"flex items-center px-3 py-1 text-red-600 bg-red-100 rounded hover:bg-red-200",children:[e.jsx(S,{className:"mr-1"})," Delete"]})]})]})})]})},V=()=>{const[s,d]=i.useState([]),[m,n]=i.useState(!0),[o,c]=i.useState(""),[l,x]=i.useState(""),a=w();i.useEffect(()=>{(async()=>{try{n(!0);const{data:r}=await j.get("/admin/employees");d(r),n(!1)}catch{c("Failed to fetch employees"),n(!1)}})()},[]);const h=async t=>{if(window.confirm("Are you sure you want to delete this employee?"))try{await j.delete(`/admin/employees/${t}`),d(s.filter(r=>r._id!==t)),b.success("Employee deleted successfully")}catch{c("Failed to delete employee"),b.error("Failed to delete employee")}},u=s.filter(t=>{var r,p,f,g;return((r=t.firstName)==null?void 0:r.toLowerCase().includes(l.toLowerCase()))||((p=t.lastName)==null?void 0:p.toLowerCase().includes(l.toLowerCase()))||((f=t.email)==null?void 0:f.toLowerCase().includes(l.toLowerCase()))||((g=t.department)==null?void 0:g.toLowerCase().includes(l.toLowerCase()))});return m?e.jsx("div",{className:"flex justify-center p-8",children:"Loading employees..."}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Employee Management"}),e.jsxs("button",{onClick:()=>a("/admin/add-employee"),className:"flex items-center px-4 py-2 text-white bg-green-600 rounded-md hover:bg-green-700",children:[e.jsx($,{className:"mr-2"})," Add Employee"]})]}),o&&e.jsx("p",{className:"p-3 mb-4 text-white bg-red-500 rounded",children:o}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(_,{className:"text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search employees...",value:l,onChange:t=>x(t.target.value),className:"w-full py-2 pl-10 pr-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.length===0?e.jsx("p",{className:"p-4 text-center text-gray-500",children:"No employees found"}):e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:u.map(t=>e.jsx(T,{employee:t,onDelete:()=>h(t._id),onEdit:()=>a(`/admin/edit-employee/${t._id}`)},t._id))})]})};export{V as default};
